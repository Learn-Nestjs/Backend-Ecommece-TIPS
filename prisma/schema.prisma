// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}


enum ShopStatus {
  ACTIVE
  INACTIVE
}

enum UserRoleType {
  SELLER
  BUYER
}

enum Permissions {
  ALL
  SELL
  SHOPPING
}

model shopSchema {
  id String @id @default(auto()) @db.ObjectId @map("_id")
  name String 
  email String @unique
  password String 
  status ShopStatus @default(INACTIVE)
  verify Boolean @default(false)
  roles UserRoleType[] @default([])
  keyToken keyToken ?
}

model keyToken {
  id String @id @default(auto()) @db.ObjectId @map("_id")
  shop  shopSchema @relation(fields: [shopId], references: [id])
  shopId String @db.ObjectId @unique
  keyAccess String 
  keyRefresh String 
  refreshTokensUsed String[] @default([])
  refreshToken String
}


model apiKey {
  id String @id @default(auto()) @db.ObjectId @map("_id")
  key String @unique
  status Boolean @default(true)
  permissions Permissions[] @default([])
}